!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=18)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=Object.prototype.toString;e.default=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":n.call(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.join=void 0;const n=Array.prototype.join;function i(t,e=","){return null==t?"":n.call(t,e)}e.join=i,e.default=i},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ODataFilter=e.ExprOperator=e.ODataDateTimeOffset=e.ODataDateTime=e.ODataDataObject=void 0;const i=n(r(2)),o=r(14);class s{}e.ODataDataObject=s;class u extends s{constructor(t){super(),this._date=t}static from(t){return new u(t)}toString(){return`datetime'${this._date.toISOString()}'`}}e.ODataDateTime=u;class a extends s{constructor(t){super(),this._date=t}static from(t){return new a(t)}toString(){return`datetimeoffset'${this._date.toISOString()}'`}}var c;e.ODataDateTimeOffset=a,function(t){t.eq="eq",t.ne="ne",t.gt="gt",t.lt="lt",t.ge="ge",t.le="le"}(c=e.ExprOperator||(e.ExprOperator={}));class l{constructor(t,e,r){this._exprMappings=r,this._fieldName=e,this._filter=t,null==this._getFieldExprs()&&(this._exprMappings[this._fieldName]=[])}_getFieldExprs(){return this._exprMappings[this._fieldName]}_addExpr(t,e){var r;switch(typeof e){case"number":this._getFieldExprs().push({op:t,value:""+e});break;case"string":e.startsWith("'")||e.startsWith("datetime")?this._getFieldExprs().push({op:t,value:e}):this._getFieldExprs().push({op:t,value:`'${e}'`});break;case"object":if(!(e instanceof s))throw new o.FrameworkError(`Not support object ${(null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name)||typeof e} in odata filter eq/ne/gt/ge/ne/nt ...`);this._getFieldExprs().push({op:t,value:e.toString()});break;case"undefined":throw new o.ValidationError("You must set value in odata filter eq/ne/gt/ge/ne/nt ...");default:throw new o.FrameworkError(`Not support typeof ${typeof e}: ${e} in odata filter eq/ne/gt/ge/ne/nt ...`)}}eq(t){return this._addExpr(c.eq,t),this._filter}ne(t){return this._addExpr(c.ne,t),this._filter}eqString(t){return this._addExpr(c.eq,`'${t}'`),this._filter}neString(t){return this._addExpr(c.ne,`'${t}'`),this._filter}ge(t){return this._addExpr(c.ge,t),this._filter}gt(t){return this._addExpr(c.gt,t),this._filter}le(t){return this._addExpr(c.le,t),this._filter}lt(t){return this._addExpr(c.lt,t),this._filter}in(t=[]){return t.length>0&&t.forEach(t=>{this.eqString(t)}),this._filter}between(t,e,r=!0){if(null==t||null==e)throw new o.ValidationError("You must give out the start and end value");return r?(this.ge(t),this.le(e)):(this.gt(t),this.lt(e)),this._filter}betweenDateTime(t,e,r=!0){if(null==t&&null==e)throw new o.ValidationError("You must give out the start or end date");return t instanceof Date&&(r?this.ge(`datetime'${t.toISOString()}'`):this.gt(`datetime'${t.toISOString()}'`)),e instanceof Date&&(r?this.le(`datetime'${e.toISOString()}'`):this.lt(`datetime'${e.toISOString()}'`)),this._filter}betweenDateTimeOffset(t,e,r=!0){if(null==t&&null==e)throw new o.ValidationError("You must give out the start or end date");return t instanceof Date&&(r?this.ge(`datetimeoffset'${t.toISOString()}'`):this.gt(`datetimeoffset'${t.toISOString()}'`)),e instanceof Date&&(r?this.le(`datetimeoffset'${e.toISOString()}'`):this.lt(`datetimeoffset'${e.toISOString()}'`)),this._filter}}class d{constructor(){this._fieldExprMappings={}}static newBuilder(){return new d}static newFilter(){return new d}getExprMapping(){return this._fieldExprMappings}field(t){return new l(this,t,this.getExprMapping())}fieldIn(t,e){return this.fieldValueMatchArray(t,e)}fieldValueMatchArray(t,e=[]){return e&&e.forEach(e=>{this.field(t).eqString(e)}),this}inPeriod(t,e,r){return this.betweenDateTime(t,e,r)}betweenDateTime(t,e,r){if(e&&r)return this.gtDateTime(t,e).ltDateTime(t,r);throw new o.ValidationError("You must give out the start and end date")}betweenDateTimeOffset(t,e,r){if(e&&r)return this.gtDateTimeOffset(t,e).ltDateTimeOffset(t,r);throw new o.ValidationError("You must give out the start and end date")}gtDateTime(t,e){return this.field(t).gt(`datetime'${e.toISOString()}'`)}gtDateTimeOffset(t,e){return this.field(t).gt(`datetimeoffset'${e.toISOString()}'`)}ltDateTime(t,e){return this.field(t).lt(`datetime'${e.toISOString()}'`)}ltDateTimeOffset(t,e){return this.field(t).lt(`datetimeoffset'${e.toISOString()}'`)}and(t){return this}or(t){return this}group(t){return this._fieldExprMappings=Object.assign(this._fieldExprMappings,t.getExprMapping()),this}toString(){return this.build()}_buildFieldExprString(t){const e=this.getExprMapping()[t];return e.length>0?0==e.filter(t=>t.op==c.eq).length?`(${i.default(e.map(({op:e,value:r})=>`${t} ${e} ${r}`)," and ")})`:`(${i.default(e.map(({op:e,value:r})=>`${t} ${e} ${r}`)," or ")})`:""}build(){let t="";return t=i.default(Object.entries(this.getExprMapping()).map(([t,e])=>{switch(e.length){case 0:return"";case 1:const{op:r,value:n}=e[0];return`${t} ${r} ${n}`;default:return this._buildFieldExprString(t)}})," and "),t}}e.ODataFilter=d},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ODataParam=e.ODataQueryParam=void 0;const i=r(3),o=n(r(12)),s=n(r(2)),u=n(r(13)),a=n(r(37));class c{constructor(){this._store=new Map}append(t,e){this._store.set(t,e)}toString(){const t=[];return this._store.forEach((e,r)=>{t.push(`${r}=${e}`)}),t.join("&")}}class l{constructor(){this.$skip=0,this.$top=0,this.$select=[],this.$format="json",this.$expand=[],this.$count=!1}static newParam(){return new l}inlinecount(t=!1){return t?this.$inlinecount="allpages":delete this.$inlinecount,this}count(t=!0){return this.$count=t,this}filter(t){if(t instanceof i.ODataFilter)return this.$filter=t.build(),this;if("string"==typeof t)return this.$filter=t,this;throw Error("ODataQueryParam.filter only accept string or ODataFilter type parameter")}skip(t){return this.$skip=t,this}top(t){return this.$top=t,this}select(t){return this.$select=o.default(this.$select,t),this}orderby(t,e="desc"){return u.default(t)?this.orderbyMulti(t):(this.$orderby=`${t} ${e}`,this)}orderbyMulti(t=[]){return this.$orderby=s.default(t.map(t=>`${t.field} ${t.order||"desc"}`),","),this}format(t){if("json"!==t)throw new Error("light-odata dont support xml response");return this.$format=t,this}search(t,e=!0){return this.$search=e?`%${t}%`:t,this}expand(t,e=!1){return e?"string"==typeof t?this.$expand=[t]:u.default(t)&&(this.$expand=t):this.$expand=o.default(this.$expand,t),this}toString(t="v2"){const e=new c;switch(this.$format&&e.append("$format",this.$format),this.$filter&&e.append("$filter",this.$filter.toString()),this.$orderby&&e.append("$orderby",this.$orderby),this.$search&&e.append("$search",this.$search),this.$select&&this.$select.length>0&&e.append("$select",s.default(a.default(this.$select),",")),this.$skip&&e.append("$skip",this.$skip.toString()),this.$top&&this.$top>0&&e.append("$top",this.$top.toString()),this.$expand&&this.$expand.length>0&&e.append("$expand",this.$expand.join(",")),t){case"v2":this.$inlinecount&&e.append("$inlinecount",this.$inlinecount);break;case"v4":this.$count&&e.append("$count","true")}return e.toString()}}e.ODataQueryParam=l,e.ODataParam=l},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OData=void 0;const o=i(r(19)),s=i(r(2)),u=i(r(6)),a=i(r(8)),c=r(17),l=r(9),d=r(3),f=r(4),h=r(16),p=r(51),_=r(14),v=(t,e)=>n(void 0,void 0,void 0,(function*(){const r=yield fetch(t,e);let n=yield r.text();if(r.headers.has("Content-Type")&&a.default(r.headers.get("Content-Type"),"application/json")){const t=o.default(JSON.parse,n);t instanceof Error||(n=t)}return{content:n,response:r}}));class y{constructor(t,e,r={},n,i,o=!0){if(this.csrfToken="",this.commonHeader={Accept:"application/json","Content-Type":"application/json"},this.fetchProxy=v,this.processCsrfToken=!0,this.forSAP=!1,this.variant="default",this.version="v2",i&&(this.fetchProxy=i),!t)throw new Error("metadata url required !");this.metadataUri=t,this.odataEnd=s.default(u.default(this.metadataUri.split("/"),0,-1),"/")+"/",e&&(this.credential=e),this.commonHeader=Object.assign(Object.assign({},this.commonHeader),r),this.processCsrfToken=o}static New(t){const e=new y(t.metadataUri,t.credential,void 0,void 0,t.fetchProxy,t.processCsrfToken);return e.forSAP=t.forSAP||!1,e.version=t.version||"v2",e.variant=t.variant||"default",e}static New4(t){return t.version="v4",y.New(t)}static newParam(){return f.ODataParam.newParam()}static newFilter(){return d.ODataFilter.newFilter()}getHeaders(){return n(this,void 0,void 0,(function*(){let t=Object.assign({},this.commonHeader);return this.credential&&(t=Object.assign(Object.assign({},t),h.GetAuthorizationPair(this.credential.username,this.credential.password))),this.processCsrfToken&&(t["x-csrf-token"]=yield this.getCsrfToken()),t}))}getEntitySet(t){return new p.EntitySet(t,this)}setCredential(t){this.credential=t}setODataEndPath(t){t&&(this.odataEnd=t)}getVersion(){return this.version}getCsrfToken(){return n(this,void 0,void 0,(function*(){if(this.csrfToken&&null!=this.csrfToken)return this.csrfToken;const t={method:"GET",headers:{"x-csrf-token":"fetch"}};this.credential&&(t.headers=Object.assign(Object.assign({},t.headers),h.GetAuthorizationPair(this.credential.username,this.credential.password)));const{response:{headers:e}}=yield this.fetchProxy(this.odataEnd,t);if(!e)throw new Error("csrf token need the odata proxy give out headers!");return this.csrfToken=e.get("x-csrf-token"),this.csrfToken}))}cleanCsrfToken(){this.csrfToken&&delete this.csrfToken}requestUri(t,e,r="GET",i){return n(this,void 0,void 0,(function*(){const e=t,n={method:r,headers:yield this.getHeaders()};"GET"!==r&&i&&(n.body="string"!=typeof i?JSON.stringify(i):i);let o=yield this.fetchProxy(e,n);this.processCsrfToken&&o.response.headers&&"Required"===o.response.headers.get("x-csrf-token")&&(this.cleanCsrfToken(),n.headers["x-csrf-token"]=yield this.getCsrfToken(),o=yield this.fetchProxy(e,n));const{content:s}=o;return s}))}request(t,e,r,i="GET",o){return n(this,void 0,void 0,(function*(){let n=`${this.odataEnd}${t}`;return e&&(n+=this.formatIdString(e)),r&&(n=`${n}?${r.toString(this.version)}`),this.requestUri(n,r,i,o)}))}formatIdString(t){let e="";switch(typeof t){case"object":e=`(${Object.entries(t).map(t=>{const e=t[0],r=t[1];switch(typeof r){case"string":return`${e}='${r}'`;case"number":case"boolean":return`${e}=${r}`;default:return""}}).filter(t=>t).join(",")})`;break;case"number":e=`(${t})`;break;case"string":e="cap"==this.variant?`(${t})`:`('${t}')`;break;case"undefined":break;default:throw new _.FrameworkError(`Not supported ObjectID type ${typeof t} for request`)}return e}newRequest(t){return n(this,void 0,void 0,(function*(){return this.request(t.collection,t.id,t.params,t.method,t.entity)}))}formatBatchRequests(t){return n(this,void 0,void 0,(function*(){const e=this.odataEnd+"$batch",r={method:"POST",headers:yield this.getHeaders()},i=yield Promise.all(t.map(t=>n(this,void 0,void 0,(function*(){return yield t})))),o=c.v4();return r.headers["Content-Type"]="multipart/mixed; boundary="+o,r.body=l.formatBatchRequest(i,o),{url:e,req:r}}))}execBatchRequests(t){return n(this,void 0,void 0,(function*(){const{url:e,req:r}=yield this.formatBatchRequests(t),{content:n,response:{headers:i}}=yield this.fetchProxy(e,r),o=i.get("Content-Type").split("=").pop();return o.length,yield l.parseMultiPartContent(n,o)}))}newBatchRequest(t){return n(this,void 0,void 0,(function*(){let{withContentLength:e=!1}=t;const{collection:r,method:n="GET",id:i,params:o,entity:s}=t;this.forSAP&&(e=!0);let u=r;const a=Object.assign({},this.commonHeader),c={url:u,init:{method:n,headers:a,body:""}};if(i&&(u+=this.formatIdString(i)),"GET"===n||"DELETE"===n)delete a["Content-Type"],o&&(u=`${u}?${o.toString(this.version)}`);else{switch(typeof s){case"string":c.init.body=s;break;case"object":c.init.body=JSON.stringify(s)}e&&(c.init.headers["Content-Length"]=encodeURI(c.init.body.toString()).length)}return c.init.headers=a,c.url=u,c}))}}e.OData=y},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.slice=void 0;const i=n(r(22)),o=n(r(28));function s(t,e,r){const n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&i.default(t,e,r)?(e=0,r=n):(e=null==e?0:o.default(e),r=void 0===r?n:o.default(r)),function(t,e,r){let n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;const o=Array(i);for(;++n<i;)o[n]=t[n+e];return o}(t,e,r)):[]}e.slice=s,e.default=s},function(t,e,r){"use strict";function n(t){const e=typeof t;return null!=t&&("object"===e||"function"===e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=void 0,e.isObject=n,e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t="",e,r=0){const{length:n}=t;return(r=null==r?0:r)<0?r=0:r>n&&(r=n),e=""+e,t.slice(r,r+e.length)==e}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseMultiPartContent=e.parseResponse2=e.formatBatchRequest=e.formatHttpRequestString=void 0;const o=i(r(6)),s=i(r(2)),u=i(r(32)),a=i(r(12)),c=i(r(8)),l=r(36),d=r(17);e.formatHttpRequestString=(t,e)=>s.default([`${e.method||"GET"} ${t} HTTP/1.1`,""+s.default(Object.entries(e.headers).map(([t,e])=>`${t}: ${e}`),"\r\n"),""+(e.body?"\r\n"+e.body:"")],"\r\n"),e.formatBatchRequest=(t,r)=>s.default(a.default(t.map(t=>{if("GET"===t.init.method||!t.init.method)return s.default(["--"+r,"Content-Type: application/http","Content-Transfer-Encoding: binary","",e.formatHttpRequestString(t.url,t.init),""],"\r\n");const n=d.v4();return s.default(["--"+r,"Content-Type: multipart/mixed; boundary="+n,"","--"+n,"Content-Type: application/http","Content-Transfer-Encoding: binary","",e.formatHttpRequestString(t.url,t.init),"",`--${n}--`],"\r\n")}),`--${r}--`),"\r\n"),e.parseResponse2=t=>n(void 0,void 0,void 0,(function*(){const e=l.parseResponse(t);return{json:()=>n(void 0,void 0,void 0,(function*(){return JSON.parse(e.body)})),text:()=>n(void 0,void 0,void 0,(function*(){return e.body})),headers:e.headers,status:parseInt(e.statusCode,10),statusText:e.statusMessage}})),e.parseMultiPartContent=(t,r)=>n(void 0,void 0,void 0,(function*(){if(t&&r){const i=t.split("--"+r),s=o.default(i,1,i.length-1);return u.default(yield Promise.all(s.map(t=>n(void 0,void 0,void 0,(function*(){const r=yield e.parseResponse2(t),n=r.headers["Content-Type"];if(c.default(n,"multipart/mixed")){const t=n.split("=").pop();return e.parseMultiPartContent(yield r.text(),t)}if("application/http"===n)return e.parseResponse2(yield r.text())})))))}throw new Error("parameter lost")}))},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(33)),o=n(r(11));e.default=function t(e,r,n,s,u){var a=-1,c=e.length;for(n||(n=i.default),u||(u=[]);++a<c;){var l=e[a];r>0&&n(l)?r>1?t(l,r-1,n,s,u):o.default(u,l):s||(u[u.length]=l)}return u}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;const i=n(r(10)),o=n(r(35)),s=n(r(11)),u=n(r(13));function a(...t){const e=t.length;if(!e)return[];const r=Array(e-1),n=t[0];let a=e;for(;a--;)r[a-1]=t[a];return s.default(u.default(n)?o.default(n):[n],i.default(r,1))}e.concat=a,e.default=a},function(t,e,r){"use strict";function n(t){return Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=n,e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValidationError=e.FrameworkError=e.AuthendicationError=e.ODataServerError=void 0;class n extends Error{constructor(t){super(t)}}e.ODataServerError=n;class i extends Error{constructor(t){super(t)}}e.AuthendicationError=i;class o extends Error{constructor(t){super(t)}}e.FrameworkError=o;class s extends Error{constructor(t){super(t)}}e.ValidationError=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){let e=-1;const r=new Array(t.size);return t.forEach(t=>{r[++e]=t}),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetAuthorizationPair=e.FormatODataDateTimedate=e.ConvertDateFromODataTime=void 0;const n=r(50);e.ConvertDateFromODataTime=function(t="0"){return new Date(parseInt(t.replace(/[^\d.]/g,""),10))},e.FormatODataDateTimedate=function(t=new Date){return`/Date(${t.getTime()})/`},e.GetAuthorizationPair=function(t,e){return{Authorization:"Basic "+n.encode(`${t}:${e}`)}}},function(t,e,r){"use strict";r.r(e),r.d(e,"v1",(function(){return h})),r.d(e,"v3",(function(){return w})),r.d(e,"v4",(function(){return $})),r.d(e,"v5",(function(){return M}));var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}for(var s=[],u=0;u<256;++u)s.push((u+256).toString(16).substr(1));var a,c,l=function(t,e){var r=e||0;return(s[t[r+0]]+s[t[r+1]]+s[t[r+2]]+s[t[r+3]]+"-"+s[t[r+4]]+s[t[r+5]]+"-"+s[t[r+6]]+s[t[r+7]]+"-"+s[t[r+8]]+s[t[r+9]]+"-"+s[t[r+10]]+s[t[r+11]]+s[t[r+12]]+s[t[r+13]]+s[t[r+14]]+s[t[r+15]]).toLowerCase()},d=0,f=0;var h=function(t,e,r){var n=e&&r||0,i=e||new Array(16),s=(t=t||{}).node||a,u=void 0!==t.clockseq?t.clockseq:c;if(null==s||null==u){var h=t.random||(t.rng||o)();null==s&&(s=a=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==u&&(u=c=16383&(h[6]<<8|h[7]))}var p=void 0!==t.msecs?t.msecs:Date.now(),_=void 0!==t.nsecs?t.nsecs:f+1,v=p-d+(_-f)/1e4;if(v<0&&void 0===t.clockseq&&(u=u+1&16383),(v<0||p>d)&&void 0===t.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=p,f=_,c=u;var y=(1e4*(268435455&(p+=122192928e5))+_)%4294967296;i[n++]=y>>>24&255,i[n++]=y>>>16&255,i[n++]=y>>>8&255,i[n++]=255&y;var g=p/4294967296*1e4&268435455;i[n++]=g>>>8&255,i[n++]=255&g,i[n++]=g>>>24&15|16,i[n++]=g>>>16&255,i[n++]=u>>>8|128,i[n++]=255&u;for(var m=0;m<6;++m)i[n+m]=s[m];return e||l(i)};var p=function(t,e,r){function n(t,n,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=function(t){var e=[];return t.replace(/[a-fA-F0-9]{2}/g,(function(t){e.push(parseInt(t,16))})),e}(n)),!Array.isArray(t))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var s=r(n.concat(t));if(s[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(var u=0;u<16;++u)i[o+u]=s[u];return i}return l(s)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function _(t){return 14+(t+64>>>9<<4)+1}function v(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function y(t,e,r,n,i,o){return v((s=v(v(e,t),v(n,o)))<<(u=i)|s>>>32-u,r);var s,u}function g(t,e,r,n,i,o,s){return y(e&r|~e&n,t,e,i,o,s)}function m(t,e,r,n,i,o,s){return y(e&n|r&~n,t,e,i,o,s)}function b(t,e,r,n,i,o,s){return y(e^r^n,t,e,i,o,s)}function O(t,e,r,n,i,o,s){return y(r^(e|~n),t,e,i,o,s)}var w=p("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,n=0;n<r;n+=8){var i=t[n>>5]>>>n%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[_(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var u=r,a=n,c=i,l=o;r=g(r,n,i,o,t[s],7,-680876936),o=g(o,r,n,i,t[s+1],12,-389564586),i=g(i,o,r,n,t[s+2],17,606105819),n=g(n,i,o,r,t[s+3],22,-1044525330),r=g(r,n,i,o,t[s+4],7,-176418897),o=g(o,r,n,i,t[s+5],12,1200080426),i=g(i,o,r,n,t[s+6],17,-1473231341),n=g(n,i,o,r,t[s+7],22,-45705983),r=g(r,n,i,o,t[s+8],7,1770035416),o=g(o,r,n,i,t[s+9],12,-1958414417),i=g(i,o,r,n,t[s+10],17,-42063),n=g(n,i,o,r,t[s+11],22,-1990404162),r=g(r,n,i,o,t[s+12],7,1804603682),o=g(o,r,n,i,t[s+13],12,-40341101),i=g(i,o,r,n,t[s+14],17,-1502002290),n=g(n,i,o,r,t[s+15],22,1236535329),r=m(r,n,i,o,t[s+1],5,-165796510),o=m(o,r,n,i,t[s+6],9,-1069501632),i=m(i,o,r,n,t[s+11],14,643717713),n=m(n,i,o,r,t[s],20,-373897302),r=m(r,n,i,o,t[s+5],5,-701558691),o=m(o,r,n,i,t[s+10],9,38016083),i=m(i,o,r,n,t[s+15],14,-660478335),n=m(n,i,o,r,t[s+4],20,-405537848),r=m(r,n,i,o,t[s+9],5,568446438),o=m(o,r,n,i,t[s+14],9,-1019803690),i=m(i,o,r,n,t[s+3],14,-187363961),n=m(n,i,o,r,t[s+8],20,1163531501),r=m(r,n,i,o,t[s+13],5,-1444681467),o=m(o,r,n,i,t[s+2],9,-51403784),i=m(i,o,r,n,t[s+7],14,1735328473),n=m(n,i,o,r,t[s+12],20,-1926607734),r=b(r,n,i,o,t[s+5],4,-378558),o=b(o,r,n,i,t[s+8],11,-2022574463),i=b(i,o,r,n,t[s+11],16,1839030562),n=b(n,i,o,r,t[s+14],23,-35309556),r=b(r,n,i,o,t[s+1],4,-1530992060),o=b(o,r,n,i,t[s+4],11,1272893353),i=b(i,o,r,n,t[s+7],16,-155497632),n=b(n,i,o,r,t[s+10],23,-1094730640),r=b(r,n,i,o,t[s+13],4,681279174),o=b(o,r,n,i,t[s],11,-358537222),i=b(i,o,r,n,t[s+3],16,-722521979),n=b(n,i,o,r,t[s+6],23,76029189),r=b(r,n,i,o,t[s+9],4,-640364487),o=b(o,r,n,i,t[s+12],11,-421815835),i=b(i,o,r,n,t[s+15],16,530742520),n=b(n,i,o,r,t[s+2],23,-995338651),r=O(r,n,i,o,t[s],6,-198630844),o=O(o,r,n,i,t[s+7],10,1126891415),i=O(i,o,r,n,t[s+14],15,-1416354905),n=O(n,i,o,r,t[s+5],21,-57434055),r=O(r,n,i,o,t[s+12],6,1700485571),o=O(o,r,n,i,t[s+3],10,-1894986606),i=O(i,o,r,n,t[s+10],15,-1051523),n=O(n,i,o,r,t[s+1],21,-2054922799),r=O(r,n,i,o,t[s+8],6,1873313359),o=O(o,r,n,i,t[s+15],10,-30611744),i=O(i,o,r,n,t[s+6],15,-1560198380),n=O(n,i,o,r,t[s+13],21,1309151649),r=O(r,n,i,o,t[s+4],6,-145523070),o=O(o,r,n,i,t[s+11],10,-1120210379),i=O(i,o,r,n,t[s+2],15,718787259),n=O(n,i,o,r,t[s+9],21,-343485551),r=v(r,u),n=v(n,a),i=v(i,c),o=v(o,l)}return[r,n,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(_(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}));var $=function(t,e,r){var n=(t=t||{}).random||(t.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return l(n)};function j(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function E(t,e){return t<<e|t>>>32-e}var M=p("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),u=new Array(s),a=0;a<s;++a){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=t[64*a+4*l]<<24|t[64*a+4*l+1]<<16|t[64*a+4*l+2]<<8|t[64*a+4*l+3];u[a]=c}u[s-1][14]=8*(t.length-1)/Math.pow(2,32),u[s-1][14]=Math.floor(u[s-1][14]),u[s-1][15]=8*(t.length-1)&4294967295;for(var d=0;d<s;++d){for(var f=new Uint32Array(80),h=0;h<16;++h)f[h]=u[d][h];for(var p=16;p<80;++p)f[p]=E(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var _=r[0],v=r[1],y=r[2],g=r[3],m=r[4],b=0;b<80;++b){var O=Math.floor(b/20),w=E(_,5)+j(O,v,y,g)+m+e[O]+f[b]>>>0;m=g,g=y,y=E(v,30)>>>0,v=_,_=w}r[0]=r[0]+_>>>0,r[1]=r[1]+v>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}))},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(5),e),i(r(52),e),i(r(16),e),i(r(3),e),i(r(4),e),i(r(9),e)},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.attempt=void 0;const i=n(r(20));function o(t,...e){try{return t(...e)}catch(t){return i.default(t)?t:new Error(t)}}e.attempt=o,e.default=o},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isError=void 0;const i=n(r(0)),o=n(r(1)),s=n(r(21));function u(t){if(!o.default(t))return!1;if(Error&&t instanceof Error)return!0;if(DOMException&&t instanceof DOMException)return!0;const e=i.default(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!s.default(t)}e.isError=u,e.default=u},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isPlainObject=void 0;const i=n(r(0)),o=n(r(1));function s(t){if(!o.default(t)||"[object Object]"!=i.default(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}e.isPlainObject=s,e.default=s},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(23)),o=n(r(26)),s=n(r(7)),u=n(r(27));e.default=function(t,e,r){if(!s.default(r))return!1;const n=typeof e;return!!("number"===n?i.default(r)&&o.default(e,r.length):"string"===n&&e in r)&&u.default(r[e],t)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0;const i=n(r(24)),o=n(r(25));function s(t){return null!=t&&i.default(t.length)&&!o.default(t)}e.isArrayLike=s,e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLength=void 0;const n=Number.MAX_SAFE_INTEGER||9007199254740991;function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}e.isLength=i,e.default=i},function(t,e,r){"use strict";function n(t){return"function"==typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=n,e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=/^(?:0|[1-9]\d*)$/;e.default=function(t,e){const r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"===r||"symbol"!==r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(29));e.default=function(t){const e=i.default(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(30)),o=Number.MAX_VALUE||17976931348623157e292;e.default=function(t){if(!t)return 0===t?t:0;if((t=i.default(t))===1/0||t===-1/0){return(t<0?-1:1)*o}return t==t?t:0}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(7)),o=n(r(31)),s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.default=function(t){if("number"==typeof t)return t;if(o.default(t))return Number.NaN;if(i.default(t)){const e="function"==typeof t.valueOf?t.valueOf():t;t=i.default(e)?""+e:e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");const e=a.test(t);return e||c.test(t)?l(t.slice(2),e?2:8):u.test(t)?Number.NaN:+t}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isSymbol=void 0;const i=n(r(0)),o=n(r(1));function s(t){return"symbol"==typeof t||o.default(t)&&"[object Symbol]"==i.default(t)}e.isSymbol=s,e.default=s},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=void 0;const i=n(r(10));function o(t){return(null==t?0:t.length)?i.default(t,1):[]}e.flatten=o,e.default=o},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(34)),o=Symbol.isConcatSpreadable;e.default=function(t){return Array.isArray(t)||i.default(t)||!(!t||!t[o])}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isArguments=void 0;const i=n(r(0)),o=n(r(1));function s(t){return o.default(t)&&"[object Arguments]"==i.default(t)}e.isArguments=s,e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){let r=-1;const n=t.length;for(e||(e=new Array(n));++r<n;)e[r]=t[r];return e}},function(t,e){var r,n,i,o,s;n=function(t){var e,n,o,s,u;for(u={},o=t.split(/\r?\n/),s=i(o.shift()),u.method=s.method,u.uri=s.uri,e=[];o.length>0&&""!==(n=o.shift());)e.push(n);return u.headers=r(e),u.body=o.join("\r\n"),u},o=function(t){var e,n,i,o,u;for(u={},i=t.split(/\r?\n/),o=s(i.shift()),u.protocolVersion=o.protocol,u.statusCode=o.statusCode,u.statusMessage=o.statusMessage,e=[];i.length>0&&""!==(n=i.shift());)e.push(n);return u.headers=r(e),u.body=i.join("\r\n"),u},r=function(t){var e,r,n,i;for(e={},n=0,i=t.length;n<i;n++)e[(r=t[n].split(":")).shift()]=r.join(":").trim();return e},s=function(t){var e,r;return e={},null!==(r=t.match(/^(.+) ([0-9]{3}) (.*)$/))&&(e.protocol=r[1],e.statusCode=r[2],e.statusMessage=r[3]),e},i=function(t){var e,r;return r=t.split(" "),(e={}).method=r[0],e.uri=r[1],e.protocol=r[2],e},t.exports.parseRequest=n,t.exports.parseResponse=o,t.exports.parseRequestLine=i,t.exports.parseStatusLine=s,t.exports.parseHeaders=r},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.uniq=void 0;const i=n(r(38));function o(t){return null!=t&&t.length?i.default(t):[]}e.uniq=o,e.default=o},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(39)),o=n(r(42)),s=n(r(47)),u=n(r(48)),a=n(r(49)),c=n(r(15));e.default=function(t,e,r){let n=-1,l=o.default,d=!0;const{length:f}=t,h=[];let p=h;if(r)d=!1,l=s.default;else if(f>=200){const r=e?null:a.default(t);if(r)return c.default(r);d=!1,l=u.default,p=new i.default}else p=e?[]:h;t:for(;++n<f;){let i=t[n];const o=e?e(i):i;if(i=r||0!==i?i:0,d&&o==o){let t=p.length;for(;t--;)if(p[t]===o)continue t;e&&p.push(o),h.push(i)}else l(p,o,r)||(p!==h&&p.push(o),h.push(i))}return h}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(40));class o{constructor(t){let e=-1;const r=null==t?0:t.length;for(this.__data__=new i.default;++e<r;)this.add(t[e])}add(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}has(t){return this.__data__.has(t)}}o.prototype.push=o.prototype.add,e.default=o},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(41));function o({__data__:t},e){const r=t;return function(t){const e=typeof t;return"string"===e||"number"===e||"symbol"===e||"boolean"===e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}e.default=class{constructor(t){let e=-1;const r=null==t?0:t.length;for(this.clear();++e<r;){const r=t[e];this.set(r[0],r[1])}}clear(){this.size=0,this.__data__={hash:new i.default,map:new Map,string:new i.default}}delete(t){const e=o(this,t).delete(t);return this.size-=e?1:0,e}get(t){return o(this,t).get(t)}has(t){return o(this,t).has(t)}set(t,e){const r=o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=void 0;class n{constructor(t){let e=-1;const r=null==t?0:t.length;for(this.clear();++e<r;){const r=t[e];this.set(r[0],r[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}get(t){const e=this.__data__[t];return"__lodash_hash_undefined__"===e?void 0:e}has(t){return void 0!==this.__data__[t]}set(t,e){const r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=void 0===e?"__lodash_hash_undefined__":e,this}}e.Hash=n,e.default=n},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(43));e.default=function(t,e){return!!(null==t?0:t.length)&&i.default(t,e,0)>-1}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(44)),o=n(r(45)),s=n(r(46));e.default=function(t,e,r){return e==e?s.default(t,e,r):i.default(t,o.default,r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,n){const{length:i}=t;let o=r+(n?1:-1);for(;n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t!=t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){let n=r-1;const{length:i}=t;for(;++n<i;)if(t[n]===e)return n;return-1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){if(null==t)return!1;for(const n of t)if(r(e,n))return!0;return!1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.has(e)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(15)),o=Set&&1/i.default(new Set([,-0]))[1]==1/0?t=>new Set(t):()=>{};e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t=""){t=t;let e,r,i,o,s,u="",a="",c="",l=0;do{e=t.charCodeAt(l++),r=t.charCodeAt(l++),a=t.charCodeAt(l++),i=e>>2,o=(3&e)<<4|r>>4,s=(15&r)<<2|a>>6,c=63&a,isNaN(r)?s=c=64:isNaN(a)&&(c=64),u=u+n.charAt(i)+n.charAt(o)+n.charAt(s)+n.charAt(c),e=r=a="",i=o=s=c=""}while(l<t.length);return u};e.decode=function(t){let e,r,i,o,s,u="",a="",c="",l=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=n.indexOf(t.charAt(l++)),o=n.indexOf(t.charAt(l++)),s=n.indexOf(t.charAt(l++)),c=n.indexOf(t.charAt(l++)),e=i<<2|o>>4,r=(15&o)<<4|s>>2,a=(3&s)<<6|c,u+=String.fromCharCode(e),64!=s&&(u+=String.fromCharCode(r)),64!=c&&(u+=String.fromCharCode(a)),e=r=a="",i=o=s=c=""}while(l<t.length);return u}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function u(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.EntitySet=void 0;const i=r(4),o=r(5),s=r(3);e.EntitySet=class{constructor(t,e){this._collection=t,this._client=e}_checkError(t){var e,r,n;if(t.error)switch(this._client.getVersion()){case"v2":throw new Error(null===(r=null===(e=t.error)||void 0===e?void 0:e.message)||void 0===r?void 0:r.value);case"v4":throw new Error(null===(n=t.error)||void 0===n?void 0:n.message)}}_getResult(t){var e;switch(this._client.getVersion()){case"v2":return(null===(e=t.d)||void 0===e?void 0:e.results)||t.d;case"v4":return(null==t?void 0:t.value)||t}}retrieve(t){return n(this,void 0,void 0,(function*(){const e=yield this._client.newRequest({collection:this._collection,method:"GET",id:t});return this._checkError(e),this._getResult(e)}))}find(t){return n(this,void 0,void 0,(function*(){const e=o.OData.newFilter();return Object.entries(t).forEach(([t,r])=>{"string"==typeof r?e.field(t).eqString(r):e.field(t).eq(r)}),this.query(o.OData.newParam().filter(e))}))}query(t){return n(this,void 0,void 0,(function*(){t instanceof s.ODataFilter&&(t=i.ODataQueryParam.newParam().filter(t)),null==t&&(t=o.OData.newParam());const e=yield this._client.newRequest({collection:this._collection,method:"GET",params:t});return this._checkError(e),this._getResult(e)}))}count(t){var e;return n(this,void 0,void 0,(function*(){const r=o.OData.newParam().inlinecount(!0).count(!0);t&&r.filter(t);const n=yield this._client.newRequest({collection:this._collection,method:"GET",params:r});switch(this._checkError(n),this._client.getVersion()){case"v2":return parseInt(null===(e=null==n?void 0:n.d)||void 0===e?void 0:e.__count);case"v4":return n["@odata.count"]}}))}create(t){return n(this,void 0,void 0,(function*(){const e=yield this._client.newRequest({collection:this._collection,method:"POST",entity:t});return this._checkError(e),this._getResult(e)}))}update(t,e){return n(this,void 0,void 0,(function*(){const r=yield this._client.newRequest({collection:this._collection,method:"PATCH",id:t,entity:e});return this._checkError(r),this._getResult(r)}))}delete(t){return n(this,void 0,void 0,(function*(){const e=yield this._client.newRequest({collection:this._collection,method:"DELETE",id:t});this._checkError(e)}))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}])}));